# Scanning

## Automated Enumeration Tools

The below tools can be used to automate the survey ad prviliege escalation process.  Reference the source documentation for usage of each tool.  If you plan to use these, run as many as you can as each each one offers different outputs and recommendations that others do not:

#### Bat scripts and Executables

* [reonnoiter](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/winPEAS)
       ```
       # single host enumeration
       reconnoitre -t <IP_ADDR> -o <OUTPUT_DIRECTORY> --services
       ```
* [Seatbelt](https://github.com/GhostPack/Seatbelt)
* [SharpUp](https://github.com/GhostPack/SharpUp)

#### Powershell Scripts

Before exeuting these scripts, ensure to enable the use powershell scripts with *powershell -ep bypass* from cmd or *Set-ExecutionPolicy Bypass -Scope Process* in PowerShell

* [Sherlock](https://github.com/rasta-mouse/Sherlock)
* [PowerUp](https://github.com/PowerShellMafia/PowerSploit/tree/master/Privesc)
    * How to start PowerUp.ps1 from the command prompt:
        ```c
        powershell -exec bypass
        . .\PowerUp.ps1
        Invoke-AllChecks
        ```
* [JAWS](https://github.com/411Hall/JAWS)
* [WinEnum](https://github.com/EnginDemirbilek/WinEnum)

### Host Discovery

Basic ping sweep with nmap:
```
nmap -sP <TARGETRANGE>
```

Ping sweep and send the the list of IPs that are up to a seperate file
```
nmap -sP <TARGETRANGE> | grep -B1 'Host is up' | egrep -o '([0-9]{1,3}\.){3}[0-9]{1,3}' > ips.txt
```


### Port Scanning  


Basic port scan of the top 1000 ports:
```
nmap -Pn <IP_ADDRESS>
```
Scan all ports on all target devices discovered previously
```
nmap -sC -sV -Pn -p- -iL ips.txt
```

Metasploit SYN scan
```
msf > db_nmap -sS -n <Target_IP> -p 0-65535
```

Banner grab a port
```
nc -nzv <IP_ADDDRESS> <PORT>
```



### Scanning Tools

reonnoiter

sparta 

nmapautomator 

unircorn scan

onetowpunch 

### DNS Enumeration 

The information retrieved during DNS enumeration will consist of details about names servers and IP addresses of potential targets (such as mail servers, sub-domains etc).

Use 'whois' to get general information about the domain such as the registrar, domain owner, their contact information and the DNS server used:
```
whois <DOMAIN>
```
Use 'nslookup' for querying the domain name system in order to obtain DNS records (IP Address):
```
nslookup <DOMAIN>

# query a specific record
nslookup -type=<RECORD> <DOMAIN>

# mail exchange example
nslookup -type=mx google.com

# lookup but specify DNS server to use
nslookup -type=any google.com 8.8.8.8
```
Resolce hostname to IP address:
```
host <DOMAIN>
```







